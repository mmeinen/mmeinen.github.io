{
  "permissions": {
    "allow": [
      "Bash(cd:*)",
      "Bash(python3:*)",
      "Bash(wc:*)",
      "Bash(du:*)",
      "Bash(file:*)",
      "Bash(git status:*)",
      "Bash(git log:*)",
      "Bash(git diff:*)",
      "Bash(git branch:*)",
      "Bash(ls:*)",
      "WebSearch",
      "WebFetch(domain:www.peterstefek.me)",
      "WebFetch(domain:www.khronos.org)",
      "WebFetch(domain:github.com)",
      "WebFetch(domain:wikis.khronos.org)",
      "WebFetch(domain:medium.com)",
      "WebFetch(domain:rantonels.github.io)",
      "WebFetch(domain:webglfundamentals.org)",
      "WebFetch(domain:theorangeduck.com)",
      "WebFetch(domain:dev.to)",
      "WebFetch(domain:en.wikipedia.org)",
      "WebFetch(domain:nssdc.gsfc.nasa.gov)",
      "WebFetch(domain:www.liquisearch.com)",
      "WebFetch(domain:caps.gsfc.nasa.gov)",
      "WebFetch(domain:shallowsky.com)",
      "WebFetch(domain:www.schemecolor.com)",
      "WebFetch(domain:britastro.org)",
      "WebFetch(domain:www.skyatnightmagazine.com)",
      "WebFetch(domain:www.color-hex.com)",
      "WebFetch(domain:cosmicpursuits.com)",
      "WebFetch(domain:www.planetary.org)",
      "Bash(curl:*)",
      "Skill(review-changes)",
      "Bash(tail:*)",
      "Bash(cd /c/Users/matth/Documents/mmeinen.github.io && node -e \"\nconst puppeteer = require\\('puppeteer'\\);\n\\(async \\(\\) => {\n  const browser = await puppeteer.launch\\({ headless: true, args: ['--no-sandbox'] }\\);\n  const page = await browser.newPage\\(\\);\n  await page.setViewport\\({ width: 1200, height: 800 }\\);\n  await page.goto\\('http://localhost:8000/minesweeper.html', { waitUntil: 'networkidle0' }\\);\n  // Wait for images to load\n  await new Promise\\(r => setTimeout\\(r, 1000\\)\\);\n  // Click to start the game and reveal some tiles\n  await page.mouse.click\\(600, 400\\);\n  await new Promise\\(r => setTimeout\\(r, 500\\)\\);\n  await page.screenshot\\({ path: '/tmp/ms_initial.png' }\\);\n  \n  // Click several spots to reveal more tiles with numbers\n  await page.mouse.click\\(620, 400\\);\n  await new Promise\\(r => setTimeout\\(r, 300\\)\\);\n  await page.mouse.click\\(580, 420\\);\n  await new Promise\\(r => setTimeout\\(r, 300\\)\\);\n  await page.mouse.click\\(640, 380\\);\n  await new Promise\\(r => setTimeout\\(r, 300\\)\\);\n  await page.mouse.click\\(560, 380\\);\n  await new Promise\\(r => setTimeout\\(r, 300\\)\\);\n  await page.mouse.click\\(600, 360\\);\n  await new Promise\\(r => setTimeout\\(r, 300\\)\\);\n  await page.mouse.click\\(620, 420\\);\n  await new Promise\\(r => setTimeout\\(r, 300\\)\\);\n  await page.mouse.click\\(580, 380\\);\n  await new Promise\\(r => setTimeout\\(r, 500\\)\\);\n  await page.screenshot\\({ path: '/tmp/ms_gameplay.png' }\\);\n  \n  await browser.close\\(\\);\n  console.log\\('Screenshots saved'\\);\n}\\)\\(\\);\n\" 2>&1)",
      "Bash(npm root -g 2>&1 && npm list -g puppeteer 2>&1)",
      "Bash(cd /c/Users/matth/AppData/Local/Temp && node -e \"\nconst puppeteer = require\\('puppeteer'\\);\n\\(async \\(\\) => {\n  const browser = await puppeteer.launch\\({ headless: true, args: ['--no-sandbox'] }\\);\n  const page = await browser.newPage\\(\\);\n  await page.setViewport\\({ width: 1200, height: 800 }\\);\n  await page.goto\\('http://localhost:8000/minesweeper.html', { waitUntil: 'networkidle0' }\\);\n  await new Promise\\(r => setTimeout\\(r, 1500\\)\\);\n  \n  // Click to reveal tiles\n  const clicks = [\n    [600,400],[620,400],[580,420],[640,380],[560,380],\n    [600,360],[620,420],[580,380],[640,420],[560,360],\n    [640,360],[560,440],[600,440],[620,360],[580,360],\n    [600,340],[620,340],[580,340],[560,340],[640,340]\n  ];\n  for \\(const [cx,cy] of clicks\\) {\n    await page.mouse.click\\(cx, cy\\);\n    await new Promise\\(r => setTimeout\\(r, 200\\)\\);\n  }\n  await new Promise\\(r => setTimeout\\(r, 500\\)\\);\n  \n  // Take a zoomed in clip of the center area\n  await page.screenshot\\({ \n    path: 'C:/Users/matth/AppData/Local/Temp/ms_zoomed.png',\n    clip: { x: 350, y: 200, width: 500, height: 500 }\n  }\\);\n  console.log\\('Zoomed screenshot saved'\\);\n  await browser.close\\(\\);\n}\\)\\(\\);\n\" 2>&1)",
      "Bash(cd /c/Users/matth/AppData/Local/Temp && node -e \"\nconst sharp = require\\('sharp'\\);\n\\(async \\(\\) => {\n  const img = sharp\\('C:/Users/matth/Documents/mmeinen.github.io/images/tile_castle_grey.png'\\);\n  const meta = await img.metadata\\(\\);\n  console.log\\('Image:', meta.width, 'x', meta.height, meta.channels, 'channels'\\);\n  \n  // Extract raw pixel data\n  const { data, info } = await img.raw\\(\\).toBuffer\\({ resolveWithObject: true }\\);\n  const ch = info.channels;\n  const w = info.width;\n  \n  function getPixel\\(x, y\\) {\n    const idx = \\(y * w + x\\) * ch;\n    return { r: data[idx], g: data[idx+1], b: data[idx+2], a: ch > 3 ? data[idx+3] : 255 };\n  }\n  \n  // BG_CASTLE_PIECES sprites to analyze\n  const sprites = [\n    {name: 'nothing\\(0\\)',    x: 64,  y: 256},\n    {name: 'top\\(1\\)',        x: 64,  y: 224},\n    {name: 'left\\(2\\)',       x: 160, y: 256},\n    {name: 'top+left\\(3\\)',   x: 160, y: 224},\n    {name: 'right\\(4\\)',      x: 192, y: 256},\n    {name: 'top+right\\(5\\)',  x: 192, y: 224},\n  ];\n  \n  for \\(const s of sprites\\) {\n    console.log\\('\\\\\\\\n=== ' + s.name + ' at \\(' + s.x + ',' + s.y + '\\) ==='\\);\n    // Sample center column \\(x+16\\) at each row\n    for \\(let row = 0; row < 32; row++\\) {\n      const p = getPixel\\(s.x + 16, s.y + row\\);\n      const bright = \\(p.r + p.g + p.b\\) / 3;\n      const bar = '#'.repeat\\(Math.round\\(bright / 10\\)\\);\n      console.log\\('  row ' + String\\(row\\).padStart\\(2\\) + ': rgba\\(' + p.r + ',' + p.g + ',' + p.b + ',' + p.a + '\\) ' + bar\\);\n    }\n  }\n}\\)\\(\\);\n\" 2>&1)",
      "Bash(cd /c/Users/matth/AppData/Local/Temp && node -e \"\nconst sharp = require\\('sharp'\\);\n\\(async \\(\\) => {\n  const img = sharp\\('C:/Users/matth/Documents/mmeinen.github.io/images/tile_castle_grey.png'\\);\n  const { data, info } = await img.raw\\(\\).toBuffer\\({ resolveWithObject: true }\\);\n  const ch = info.channels;\n  const w = info.width;\n  \n  function getPixel\\(x, y\\) {\n    const idx = \\(y * w + x\\) * ch;\n    return { r: data[idx], g: data[idx+1], b: data[idx+2], a: data[idx+3] };\n  }\n  \n  // Check the CASTLE_PIECES that border sky - the 'nothing' variant at \\(32,64\\)\n  console.log\\('=== CASTLE_PIECES nothing\\(0\\) at \\(32,64\\) - rows 0-31 ==='\\);\n  for \\(let row = 0; row < 32; row++\\) {\n    let line = 'r' + String\\(row\\).padStart\\(2\\) + ': ';\n    for \\(let col = 0; col < 32; col++\\) {\n      const p = getPixel\\(32 + col, 64 + row\\);\n      if \\(p.a === 0\\) line += '.';\n      else if \\(p.r + p.g + p.b < 50\\) line += 'X';\n      else if \\(p.r + p.g + p.b < 150\\) line += 'd';\n      else if \\(p.r + p.g + p.b < 280\\) line += 'W';\n      else line += 'L';\n    }\n    console.log\\(line\\);\n  }\n  \n  // Check the top\\(1\\) CASTLE_PIECE at \\(32,32\\)\n  console.log\\('\\\\\\\\n=== CASTLE_PIECES top\\(1\\) at \\(32,32\\) - rows 0-31 ==='\\);\n  for \\(let row = 0; row < 32; row++\\) {\n    let line = 'r' + String\\(row\\).padStart\\(2\\) + ': ';\n    for \\(let col = 0; col < 32; col++\\) {\n      const p = getPixel\\(32 + col, 32 + row\\);\n      if \\(p.a === 0\\) line += '.';\n      else if \\(p.r + p.g + p.b < 50\\) line += 'X';\n      else if \\(p.r + p.g + p.b < 150\\) line += 'd';\n      else if \\(p.r + p.g + p.b < 280\\) line += 'W';\n      else line += 'L';\n    }\n    console.log\\(line\\);\n  }\n  \n  // Check bottom\\(8\\) CASTLE_PIECE at \\(160,0\\) \n  console.log\\('\\\\\\\\n=== CASTLE_PIECES bottom\\(8\\) at \\(160,0\\) - rows 0-31 ==='\\);\n  for \\(let row = 0; row < 32; row++\\) {\n    let line = 'r' + String\\(row\\).padStart\\(2\\) + ': ';\n    for \\(let col = 0; col < 32; col++\\) {\n      const p = getPixel\\(160 + col, 0 + row\\);\n      if \\(p.a === 0\\) line += '.';\n      else if \\(p.r + p.g + p.b < 50\\) line += 'X';\n      else if \\(p.r + p.g + p.b < 150\\) line += 'd';\n      else if \\(p.r + p.g + p.b < 280\\) line += 'W';\n      else line += 'L';\n    }\n    console.log\\(line\\);\n  }\n}\\)\\(\\);\n\" 2>&1)",
      "Bash(cd /c/Users/matth/AppData/Local/Temp && node -e \"\nconst sharp = require\\('sharp'\\);\n\\(async \\(\\) => {\n  const img = sharp\\('C:/Users/matth/Documents/mmeinen.github.io/images/tile_castle_grey.png'\\);\n  const { data, info } = await img.raw\\(\\).toBuffer\\({ resolveWithObject: true }\\);\n  const ch = info.channels;\n  const w = info.width;\n  \n  function getPixel\\(x, y\\) {\n    const idx = \\(y * w + x\\) * ch;\n    return { r: data[idx], g: data[idx+1], b: data[idx+2], a: data[idx+3] };\n  }\n  \n  // All CASTLE_PIECES\n  var CASTLE_PIECES = [\n    {name: 'nothing\\(0\\)',  x: 32,  y: 64},\n    {name: 'top\\(1\\)',      x: 32,  y: 32},\n    {name: 'left\\(2\\)',     x: 0,   y: 64},\n    {name: 'top+left\\(3\\)', x: 0,   y: 32},\n    {name: 'right\\(4\\)',    x: 64,  y: 64},\n    {name: 'top+right\\(5\\)',x: 64,  y: 32},\n    {name: 'L+R\\(6\\)',      x: 97,  y: 64},\n    {name: 'T+L+R\\(7\\)',    x: 97,  y: 32},\n    {name: 'bottom\\(8\\)',   x: 160, y: 0},\n    {name: 'B+T\\(9\\)',      x: 160, y: 32},\n    {name: 'B+L\\(10\\)',     x: 128, y: 0},\n    {name: 'B+T+L\\(11\\)',   x: 128, y: 32},\n    {name: 'B+R\\(12\\)',     x: 192, y: 0},\n    {name: 'B+T+R\\(13\\)',   x: 192, y: 32},\n    {name: 'B+L+R\\(14\\)',   x: 128, y: 64},\n    {name: 'B+T+L+R\\(15\\)',x: 128, y: 64},\n  ];\n  \n  for \\(const s of CASTLE_PIECES\\) {\n    let transparentCount = 0;\n    let transparentRows = [];\n    for \\(let row = 0; row < 32; row++\\) {\n      let rowHasTransparent = false;\n      for \\(let col = 0; col < 32; col++\\) {\n        const p = getPixel\\(s.x + col, s.y + row\\);\n        if \\(p.a < 255\\) { transparentCount++; rowHasTransparent = true; }\n      }\n      if \\(rowHasTransparent\\) transparentRows.push\\(row\\);\n    }\n    if \\(transparentCount > 0\\) {\n      console.log\\(s.name + ' at \\(' + s.x + ',' + s.y + '\\): ' + transparentCount + ' transparent px in rows ' + transparentRows.join\\(','\\)\\);\n    }\n  }\n  \n  // Also check the bottom row of bottom pieces more carefully \n  console.log\\('\\\\\\\\n--- Bottom edge details ---'\\);\n  var bottomPieces = [\n    {name: 'bottom\\(8\\)',   x: 160, y: 0},\n    {name: 'B+L\\(10\\)',     x: 128, y: 0},\n    {name: 'B+R\\(12\\)',     x: 192, y: 0},\n  ];\n  for \\(const s of bottomPieces\\) {\n    let line = s.name + ' row31: ';\n    for \\(let col = 0; col < 32; col++\\) {\n      const p = getPixel\\(s.x + col, s.y + 31\\);\n      if \\(p.a === 0\\) line += '.';\n      else if \\(p.r + p.g + p.b < 50\\) line += 'X';\n      else if \\(p.r + p.g + p.b < 280\\) line += 'W';\n      else line += 'L';\n    }\n    console.log\\(line\\);\n  }\n}\\)\\(\\);\n\" 2>&1)",
      "Bash(cd /c/Users/matth/AppData/Local/Temp && node -e \"\nconst sharp = require\\('sharp'\\);\nconst fs = require\\('fs'\\);\n\n\\(async \\(\\) => {\n  const srcPath = 'C:/Users/matth/Documents/mmeinen.github.io/images/tile_castle_grey.png';\n  const img = sharp\\(srcPath\\);\n  const { data, info } = await img.raw\\(\\).toBuffer\\({ resolveWithObject: true }\\);\n  const ch = info.channels; // 4 \\(RGBA\\)\n  const w = info.width;\n  const h = info.height;\n  \n  // Work on a mutable copy\n  const buf = Buffer.from\\(data\\);\n  \n  function getIdx\\(x, y\\) { return \\(y * w + x\\) * ch; }\n  \n  function setPixel\\(x, y, r, g, b, a\\) {\n    const idx = getIdx\\(x, y\\);\n    buf[idx] = r; buf[idx+1] = g; buf[idx+2] = b; buf[idx+3] = a;\n  }\n  \n  function copyPixel\\(srcX, srcY, dstX, dstY\\) {\n    const si = getIdx\\(srcX, srcY\\);\n    const di = getIdx\\(dstX, dstY\\);\n    buf[di] = buf[si]; buf[di+1] = buf[si+1]; buf[di+2] = buf[si+2]; buf[di+3] = buf[si+3];\n  }\n  \n  // === FIX 1: BG_CASTLE_PIECES top variants â€” copy solid wall from no-top ===\n  // Copy \\(64,256\\) 32x32 -> \\(64,224\\)  [nothing -> top]\n  // Copy \\(160,256\\) 32x32 -> \\(160,224\\) [left -> top+left]\n  // Copy \\(192,256\\) 32x32 -> \\(192,224\\) [right -> top+right]\n  var bgCopies = [\n    { srcX: 64, srcY: 256, dstX: 64, dstY: 224 },\n    { srcX: 160, srcY: 256, dstX: 160, dstY: 224 },\n    { srcX: 192, srcY: 256, dstX: 192, dstY: 224 },\n  ];\n  \n  for \\(const c of bgCopies\\) {\n    for \\(let row = 0; row < 32; row++\\) {\n      for \\(let col = 0; col < 32; col++\\) {\n        copyPixel\\(c.srcX + col, c.srcY + row, c.dstX + col, c.dstY + row\\);\n      }\n    }\n    console.log\\('Copied \\(' + c.srcX + ',' + c.srcY + '\\) -> \\(' + c.dstX + ',' + c.dstY + '\\)'\\);\n  }\n  \n  // === FIX 2: Fill transparent pixels in CASTLE_PIECES with black outline ===\n  // These are scattered 1px mortar gaps that show sky through\n  var castleSprites = [\n    { x: 0,   y: 32 },  // top+left\\(3\\)\n    { x: 0,   y: 64 },  // left\\(2\\)\n    { x: 32,  y: 32 },  // top\\(1\\)\n    { x: 32,  y: 64 },  // nothing\\(0\\)\n    { x: 64,  y: 32 },  // top+right\\(5\\)\n    { x: 64,  y: 64 },  // right\\(4\\)\n    { x: 97,  y: 32 },  // T+L+R\\(7\\)\n    { x: 97,  y: 64 },  // L+R\\(6\\)\n    { x: 128, y: 0  },  // B+L\\(10\\)\n    { x: 128, y: 32 },  // B+T+L\\(11\\)\n    { x: 128, y: 64 },  // B+L+R\\(14\\) / B+T+L+R\\(15\\)\n    { x: 160, y: 0  },  // bottom\\(8\\)\n    { x: 160, y: 32 },  // B+T\\(9\\)\n    { x: 192, y: 0  },  // B+R\\(12\\)\n    { x: 192, y: 32 },  // B+T+R\\(13\\)\n  ];\n  \n  var fixCount = 0;\n  for \\(const s of castleSprites\\) {\n    for \\(let row = 0; row < 32; row++\\) {\n      for \\(let col = 0; col < 32; col++\\) {\n        const idx = getIdx\\(s.x + col, s.y + row\\);\n        if \\(buf[idx + 3] < 255\\) {\n          // Fill with black outline color \\(matches mortar lines\\)\n          setPixel\\(s.x + col, s.y + row, 0, 0, 0, 255\\);\n          fixCount++;\n        }\n      }\n    }\n  }\n  console.log\\('Fixed ' + fixCount + ' transparent mortar pixels in CASTLE_PIECES'\\);\n  \n  // Save\n  await sharp\\(buf, { raw: { width: w, height: h, channels: ch } }\\)\n    .png\\(\\)\n    .toFile\\(srcPath\\);\n  console.log\\('Saved modified PNG'\\);\n}\\)\\(\\);\n\" 2>&1)",
      "Bash(cd /c/Users/matth/AppData/Local/Temp && node -e \"\nconst puppeteer = require\\('puppeteer'\\);\n\\(async \\(\\) => {\n  const browser = await puppeteer.launch\\({ headless: true, args: ['--no-sandbox'] }\\);\n  const page = await browser.newPage\\(\\);\n  await page.setViewport\\({ width: 1200, height: 800 }\\);\n  await page.goto\\('http://localhost:8000/minesweeper.html', { waitUntil: 'networkidle0' }\\);\n  await new Promise\\(r => setTimeout\\(r, 1500\\)\\);\n  \n  // Click to reveal tiles\n  const clicks = [\n    [600,400],[620,400],[580,420],[640,380],[560,380],\n    [600,360],[620,420],[580,380],[640,420],[560,360],\n    [640,360],[560,440],[600,440],[620,360],[580,360],\n    [600,340],[620,340],[580,340],[560,340],[640,340]\n  ];\n  for \\(const [cx,cy] of clicks\\) {\n    await page.mouse.click\\(cx, cy\\);\n    await new Promise\\(r => setTimeout\\(r, 200\\)\\);\n  }\n  await new Promise\\(r => setTimeout\\(r, 500\\)\\);\n  \n  // Take zoomed clip\n  await page.screenshot\\({ \n    path: 'C:/Users/matth/AppData/Local/Temp/ms_fixed.png',\n    clip: { x: 350, y: 200, width: 500, height: 500 }\n  }\\);\n  console.log\\('Screenshot saved'\\);\n  await browser.close\\(\\);\n}\\)\\(\\);\n\" 2>&1)",
      "Bash(cd /c/Users/matth/AppData/Local/Temp && node -e \"\nconst puppeteer = require\\('puppeteer'\\);\n\\(async \\(\\) => {\n  const browser = await puppeteer.launch\\({ headless: true, args: ['--no-sandbox'] }\\);\n  const page = await browser.newPage\\(\\);\n  await page.setViewport\\({ width: 1200, height: 800 }\\);\n  await page.goto\\('http://localhost:8000/minesweeper.html', { waitUntil: 'networkidle0' }\\);\n  await new Promise\\(r => setTimeout\\(r, 1500\\)\\);\n  \n  // Click lots of tiles to get a good spread\n  const clicks = [\n    [600,400],[620,400],[580,420],[640,380],[560,380],\n    [600,360],[620,420],[580,380],[640,420],[560,360],\n    [640,360],[560,440],[600,440],[620,360],[580,360],\n    [600,340],[620,340],[580,340],[560,340],[640,340],\n    [500,400],[520,400],[540,400],[660,400],[680,400],\n    [500,360],[520,360],[540,360],[660,360],[680,360],\n  ];\n  for \\(const [cx,cy] of clicks\\) {\n    await page.mouse.click\\(cx, cy\\);\n    await new Promise\\(r => setTimeout\\(r, 150\\)\\);\n  }\n  await new Promise\\(r => setTimeout\\(r, 500\\)\\);\n  \n  await page.screenshot\\({ path: 'C:/Users/matth/AppData/Local/Temp/ms_full.png' }\\);\n  console.log\\('Screenshot saved'\\);\n  await browser.close\\(\\);\n}\\)\\(\\);\n\" 2>&1)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "WebFetch(domain:blog.scottlogic.com)",
      "WebFetch(domain:webassembly.github.io)",
      "Bash(node:*)",
      "Bash(npx:*)",
      "Bash(npm install:*)",
      "Bash(python:*)",
      "Bash(where wat2wasm:*)",
      "Bash(wat2wasm:*)",
      "Bash(rm:*)",
      "WebFetch(domain:ebruneton.github.io)",
      "WebFetch(domain:arxiv.org)",
      "WebFetch(domain:interplayoflight.wordpress.com)",
      "WebFetch(domain:jcgt.org)",
      "WebFetch(domain:developer.nvidia.com)",
      "WebFetch(domain:www.researchgate.net)",
      "WebFetch(domain:blog.seanholloway.com)",
      "WebFetch(domain:www.shadertoy.com)",
      "WebFetch(domain:link.springer.com)",
      "WebFetch(domain:ar5iv.labs.arxiv.org)",
      "WebFetch(domain:www.arxiv-vanity.com)",
      "WebFetch(domain:raphlinus.github.io)",
      "WebFetch(domain:advances.realtimerendering.com)",
      "WebFetch(domain:www.thefrontdev.co.uk)",
      "WebFetch(domain:mini.gmshaders.com)",
      "WebFetch(domain:iquilezles.org)",
      "WebFetch(domain:thebookofshaders.com)",
      "WebFetch(domain:www.shader-learn.com)",
      "WebFetch(domain:blog.maximeheckel.com)",
      "WebFetch(domain:gist.github.com)",
      "WebFetch(domain:www.jacktollenaar.top)",
      "Bash(base64:*)"
    ]
  }
}
